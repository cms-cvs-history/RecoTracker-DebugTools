process TkVal = 
{
  untracked PSet maxEvents = {untracked int32 input = NEVENT}

  service = MessageLogger   {
  	untracked vstring destinations   = { "cout" }
        untracked vstring categories     = { "TrackingRegressionTest" }
 	untracked vstring debugModules   = { "ckfTrackCandidates","ctfWithMaterialTracks" }
  	untracked PSet cout          = { untracked string threshold = "DEBUG" 
	  untracked PSet INFO          = { untracked int32 limit = 0 }
	  untracked PSet DEBUG         = { untracked int32 limit = 0 }
	  untracked PSet TrackingRegressionTest = { untracked int32 limit = 10000000}
        }
  }

  #include "FWCore/MessageService/data/MessageLogger.cfi"
  include "Configuration/ReleaseValidation/data/Services.cff"
  include "Configuration/StandardSequences/data/Reconstruction.cff"
  include "Configuration/StandardSequences/data/FakeConditions.cff"	
  include "Configuration/StandardSequences/data/Simulation.cff"
  #include "Configuration/StandardSequences/data/MixingNoPileUp.cff" 

  ### for the validator 
  # Track Associators
  include "SimTracker/TrackAssociation/data/TrackAssociatorByChi2.cfi"
  include "SimTracker/TrackAssociation/data/TrackAssociatorByHits.cfi"

  include "Validation/RecoTrack/data/cuts.cff"
  ##include "RecoTracker/FinalTrackSelectors/data/cutsCKF.cfi"
  include "Validation/RecoTrack/data/cutsTPEffic.cfi"
  include "Validation/RecoTrack/data/cutsTPFake.cfi"
  include "Validation/RecoTrack/data/MultiTrackValidator.cff"


  source = PoolSource 
  { 
    untracked vstring fileNames = {'file:input.root'}
    untracked uint32 debugVebosity = 10
    untracked bool   debugFlag     = true
  }


  ##############################
  #replace MessageLogger.cout.placeholder = false
  include "RecoTracker/DebugTools/test/SAMPLE.cff"
  replace multiTrackValidator.out = "val.SAMPLE.root"	
  replace multiTrackValidator.associators = {"TrackAssociatorByHits"}
  replace multiTrackValidator.label = {cutsCKF}

  #include "RecoTracker/TkSeedGenerator/data/GlobalPixelLessSeeds.cff"
  #replace ckfTrackCandidates.SeedProducer = "globalPixelLessSeeds"
  #replace ckfTrackCandidates.RedundantSeedCleaner = "CachingSeedCleanerByHitPosition"
  #replace  GroupedCkfTrajectoryBuilder.minNrOfHitsForRebuild = 0
  ###############################


  module out = PoolOutputModule 
  {
    untracked string fileName = 'digis.root'
    untracked vstring outputCommands = 
      {
        "drop *"
      }
  }      

  sequence digi2track =   {
   siPixelClusters,siPixelRecHits, siStripClusters,siStripMatchedRecHits,
   globalMixedSeeds,ckfTrackCandidates,ctfWithMaterialTracks,
   cutsCKF,cutsTPEffic,cutsTPFake,
   multiTrackValidator
  }


  sequence re_tracking =   {
   globalMixedSeeds,
#   globalPixelLessSeeds,
   ckfTrackCandidates,ctfWithMaterialTracks,
   cutsCKF,cutsTPEffic,cutsTPFake,
   multiTrackValidator
  }
 
  sequence only_validation = {
   cutsCKF,cutsTPEffic,cutsTPFake,
   multiTrackValidator
  }

    
                     
  path p = {
   SEQUENCE	
  }

 }

#  endpath e = 
#  {
#    out
#  }
}
